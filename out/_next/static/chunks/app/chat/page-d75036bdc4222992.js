(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[457],{5580:(e,t,r)=>{Promise.resolve().then(r.bind(r,1913))},7401:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var s=r(2115);let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),l=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};var i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let n=(0,s.forwardRef)((e,t)=>{let{color:r="currentColor",size:a=24,strokeWidth:n=2,absoluteStrokeWidth:o,className:c="",children:d,iconNode:u,...h}=e;return(0,s.createElement)("svg",{ref:t,...i,width:a,height:a,stroke:r,strokeWidth:o?24*Number(n)/Number(a):n,className:l("lucide",c),...h},[...u.map(e=>{let[t,r]=e;return(0,s.createElement)(t,r)}),...Array.isArray(d)?d:[d]])}),o=(e,t)=>{let r=(0,s.forwardRef)((r,i)=>{let{className:o,...c}=r;return(0,s.createElement)(n,{ref:i,iconNode:t,className:l("lucide-".concat(a(e)),o),...c})});return r.displayName="".concat(e),r}},1466:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(7401).A)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},1913:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>x});var s=r(5155),a=r(3170),l=r(2115),i=r(7401);let n=(0,i.A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var o=r(1466);let c=(0,i.A)("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]),d=(0,i.A)("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]),u=e=>{let{userProfile:t,onProfileUpdate:r,router:a}=e,[i,u]=(0,l.useState)([]),[h,x]=(0,l.useState)(""),[m,f]=(0,l.useState)(!1),[p,g]=(0,l.useState)([]),[y,b]=(0,l.useState)(!1),v=(0,l.useRef)(null),[j,w]=(0,l.useState)(!1);(0,l.useEffect)(()=>{w(!0)},[]);let N=()=>{var e;null===(e=v.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})};(0,l.useEffect)(()=>{N()},[i]);let k=async e=>{if(null==e||e.preventDefault(),h.trim()&&!m)try{f(!0),u(e=>[...e,{role:"user",content:h}]),x("");let e=await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:h,userProfile:t,chatHistory:i})});if(!e.ok)throw Error("Failed to get response");let r=await e.json();r.insights&&g(e=>[...e,...r.insights]),u(e=>[...e,{role:"assistant",content:r.content,prefills:r.suggestedQuestions}])}catch(e){console.error("Error:",e),u(e=>[...e,{role:"assistant",content:"Sorry, I encountered an error. Please try again."}])}finally{f(!1)}};return j?(0,s.jsxs)("div",{className:"relative flex flex-col h-[600px] w-full bg-white rounded-lg border border-gray-200",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center px-4 py-3 border-b border-gray-200",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Chat Assistant"}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Ask me anything about books and reading"})]}),(0,s.jsxs)("button",{onClick:()=>{b(!0)},className:"px-3 py-1.5 text-sm text-gray-600 hover:text-red-500  border border-gray-200 rounded-md hover:border-red-200  transition-colors duration-200 flex items-center gap-2",children:[(0,s.jsx)(n,{className:"w-4 h-4"}),"End Session"]})]}),(0,s.jsxs)("div",{className:"flex-1 overflow-y-auto px-4 py-4 space-y-4",children:[i.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-start gap-2 ".concat("user"===e.role?"flex-row-reverse":""),children:[(0,s.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center\n              ".concat("user"===e.role?"bg-blue-100":"bg-gray-100"),children:"user"===e.role?(0,s.jsx)(o.A,{className:"w-4 h-4 text-blue-600"}):(0,s.jsx)(c,{className:"w-4 h-4 text-gray-600"})}),(0,s.jsxs)("div",{className:"flex flex-col max-w-[75%] ".concat("user"===e.role?"items-end":"items-start"),children:[(0,s.jsx)("div",{className:"rounded-lg px-3 py-2 ".concat("user"===e.role?"bg-blue-500 text-white":"bg-gray-100 text-gray-900"),children:(0,s.jsx)("p",{className:"text-sm",children:e.content})}),e.prefills&&(0,s.jsx)("div",{className:"mt-2 flex flex-wrap gap-2",children:e.prefills.map((e,t)=>(0,s.jsx)("button",{onClick:()=>{x(e),k()},className:"px-3 py-1 text-xs bg-white text-gray-600  rounded-full hover:bg-gray-50 border border-gray-200",children:e},t))})]})]},t)),m&&(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-8 h-8 rounded-full bg-gray-100 flex items-center justify-center",children:(0,s.jsx)(c,{className:"w-4 h-4 text-gray-600"})}),(0,s.jsx)("div",{className:"px-3 py-2 bg-gray-100 rounded-lg",children:(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)("div",{className:"w-1.5 h-1.5 rounded-full bg-gray-400 animate-bounce"}),(0,s.jsx)("div",{className:"w-1.5 h-1.5 rounded-full bg-gray-400 animate-bounce",style:{animationDelay:"0.2s"}}),(0,s.jsx)("div",{className:"w-1.5 h-1.5 rounded-full bg-gray-400 animate-bounce",style:{animationDelay:"0.4s"}})]})})]}),(0,s.jsx)("div",{ref:v})]}),(0,s.jsx)("div",{className:"p-3 border-t border-gray-200",children:(0,s.jsxs)("form",{onSubmit:k,className:"flex gap-2",children:[(0,s.jsx)("input",{type:"text",value:h,onChange:e=>x(e.target.value),placeholder:"Ask me anything...",className:"flex-1 px-3 py-2 text-sm border rounded-md focus:outline-none  focus:border-blue-500 focus:ring-1 focus:ring-blue-200"}),(0,s.jsx)("button",{type:"submit",disabled:!h.trim()||m,className:"px-3 py-2 bg-blue-500 text-white rounded-md  hover:bg-blue-600 disabled:bg-gray-300  disabled:cursor-not-allowed transition-colors",children:(0,s.jsx)(d,{className:"w-4 h-4"})})]})}),y&&(0,s.jsx)("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-md mx-4",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"End Chat Session?"}),(0,s.jsx)("p",{className:"text-gray-600 mb-4",children:"Your profile will be updated with insights from this conversation."}),(0,s.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,s.jsx)("button",{onClick:()=>b(!1),className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-md",children:"Cancel"}),(0,s.jsx)("button",{onClick:()=>{p.length>0&&r(e=>({...e,sessionHistory:[...(null==e?void 0:e.sessionHistory)||[],{date:new Date().toISOString(),insights:p}]})),a.push("/profile")},className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600",children:"Confirm & View Profile"})]})]})})]}):null};var h=r(6046);function x(){let{profile:e,updateProfile:t}=(0,a.x)(),r=(0,h.useRouter)(),[i,n]=(0,l.useState)(!1);return((0,l.useEffect)(()=>{n(!0),e||r.push("/")},[e,r]),i&&e)?(0,s.jsx)("div",{className:"max-w-4xl mx-auto py-8",children:(0,s.jsx)(u,{userProfile:e,onProfileUpdate:t,router:r})}):null}},3170:(e,t,r)=>{"use strict";r.d(t,{ProfileProvider:()=>c,x:()=>d});var s=r(5155),a=r(2115),l=r(3173),i=r(8698);let n=(0,a.createContext)(),o={age:"",gender:"",areas:[],inspirations:[],linkedinUrl:"",interests:[],skills:[],goals:[],challenges:[],preferences:[],recommendations:{topOfMind:[],careerGrowth:[],personalInterests:[]},chatHistory:[]};function c(e){let{children:t}=e,[r,c]=(0,a.useState)(o),[d,u]=(0,a.useState)(!0);(0,a.useEffect)(()=>{let e=l.j.onAuthStateChanged(async e=>{if(e){let t=(0,i.KR)(l.O,"users/".concat(e.uid,"/profile")),r=(0,i.Zy)(t,e=>{let r=e.val();r?c(r):((0,i.hZ)(t,o),c(o)),u(!1)});return()=>r()}{let e=localStorage.getItem("userProfile");e&&c(JSON.parse(e)),u(!1)}});return()=>e()},[]);let h=async e=>{try{let t={...r,...e};if(l.j.currentUser){let t=(0,i.KR)(l.O,"users/".concat(l.j.currentUser.uid,"/profile"));await (0,i.yo)(t,e)}else localStorage.setItem("userProfile",JSON.stringify(t));c(t)}catch(e){console.error("Error updating profile:",e)}},x=async e=>{try{let t=await fetch("/api/profile/analyze",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chatHistory:e,currentProfile:r})}),{profileUpdates:s}=await t.json();s&&await h({...s,chatHistory:[...r.chatHistory,...e]})}catch(e){console.error("Error updating profile from chat:",e)}};return(0,s.jsx)(n.Provider,{value:{profile:r,updateProfile:h,updateProfileFromChat:x,loading:d},children:t})}let d=()=>{let e=(0,a.useContext)(n);if(!e)throw Error("useProfile must be used within a ProfileProvider");return e}},3173:(e,t,r)=>{"use strict";r.d(t,{O:()=>c,j:()=>o});var s=r(9904),a=r(8698),l=r(399);let i={apiKey:"AIzaSyDMgImGCxXusPjGVWpeek8uMlsCdzTW8OU",authDomain:"profileai-bd7c7.firebaseapp.com",projectId:"profileai-bd7c7",storageBucket:"profileai-bd7c7.firebasestorage.app",messagingSenderId:"621048336291",appId:"1:621048336291:web:2e8ccd8569a4cfa4c8d416",databaseURL:r(9538).env.NEXT_PUBLIC_FIREBASE_DATABASE_URL},n=(0,s.Wp)(i),o=(0,l.xI)(n),c=(0,a.C3)(n)}},e=>{var t=t=>e(e.s=t);e.O(0,[507,882,129,441,517,358],()=>t(5580)),_N_E=e.O()}]);
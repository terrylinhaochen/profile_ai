(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[885],{2510:(e,t,r)=>{Promise.resolve().then(r.bind(r,5197))},8657:(e,t,r)=>{"use strict";r.d(t,{A:()=>c,AuthProvider:()=>l});var a=r(5155),s=r(2115),n=r(399),i=r(3173);let o=(0,s.createContext)({}),l=e=>{let{children:t}=e,[r,l]=(0,s.useState)(null),[c,u]=(0,s.useState)(!0);(0,s.useEffect)(()=>{let e=(0,n.hg)(i.j,e=>{e?l(e):l(null),u(!1)});return()=>e()},[]);let d=async(e,t)=>{try{return(await (0,n.eJ)(i.j,e,t)).user}catch(e){throw e}},h=async(e,t)=>{try{return(await (0,n.x9)(i.j,e,t)).user}catch(e){throw e}},f=async()=>{try{let e=new n.HF;return(await (0,n.df)(i.j,e)).user}catch(e){throw e}},p=async()=>{try{await (0,n.CI)(i.j)}catch(e){throw e}};return(0,a.jsx)(o.Provider,{value:{user:r,loading:c,signUp:d,signIn:h,signInWithGoogle:f,logout:p},children:!c&&t})},c=()=>{let e=(0,s.useContext)(o);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}},3170:(e,t,r)=>{"use strict";r.d(t,{ProfileProvider:()=>c,x:()=>u});var a=r(5155),s=r(2115),n=r(3173),i=r(8698);let o=(0,s.createContext)(),l={age:"",gender:"",areas:[],inspirations:[],linkedinUrl:"",interests:[],skills:[],goals:[],challenges:[],preferences:[],recommendations:{topOfMind:[],careerGrowth:[],personalInterests:[]},chatHistory:[]};function c(e){let{children:t}=e,[r,c]=(0,s.useState)(l),[u,d]=(0,s.useState)(!0);(0,s.useEffect)(()=>{let e=n.j.onAuthStateChanged(async e=>{if(e){let t=(0,i.KR)(n.O,"users/".concat(e.uid,"/profile")),r=(0,i.Zy)(t,e=>{let r=e.val();r?c(r):((0,i.hZ)(t,l),c(l)),d(!1)});return()=>r()}{let e=localStorage.getItem("userProfile");e&&c(JSON.parse(e)),d(!1)}});return()=>e()},[]);let h=async e=>{try{let t={...r,...e};if(n.j.currentUser){let t=(0,i.KR)(n.O,"users/".concat(n.j.currentUser.uid,"/profile"));await (0,i.yo)(t,e)}else localStorage.setItem("userProfile",JSON.stringify(t));c(t)}catch(e){console.error("Error updating profile:",e)}},f=async e=>{try{let t=await fetch("/api/profile/analyze",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chatHistory:e,currentProfile:r})}),{profileUpdates:a}=await t.json();a&&await h({...a,chatHistory:[...r.chatHistory,...e]})}catch(e){console.error("Error updating profile from chat:",e)}};return(0,a.jsx)(o.Provider,{value:{profile:r,updateProfile:h,updateProfileFromChat:f,loading:u},children:t})}let u=()=>{let e=(0,s.useContext)(o);if(!e)throw Error("useProfile must be used within a ProfileProvider");return e}},5197:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var a=r(5155),s=r(2115);r(6046),r(3170);var n=r(3173),i=r(8698),o=r(8657);function l(){let[e,t]=(0,s.useState)([]),[r,l]=(0,s.useState)(!0),[c,u]=(0,s.useState)(null),{user:d}=(0,o.A)(),h=async()=>{try{if(!(null==d?void 0:d.uid))return;let e=(0,i.KR)(n.O,"users/".concat(d.uid,"/recommendations")),r=(await (0,i.Jt)(e)).val()||{};t(r)}catch(e){console.error("Error fetching recommendations:",e),u(e.message)}finally{l(!1)}};return((0,s.useEffect)(()=>{h()},[d]),r)?(0,a.jsx)("div",{children:"Loading..."}):c?(0,a.jsxs)("div",{children:["Error: ",c]}):(0,a.jsxs)("div",{className:"max-w-2xl mx-auto mt-8 p-6 bg-white rounded-lg shadow",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Your Recommendations"}),(0,a.jsx)("button",{onClick:h,className:"mb-4 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Refresh Recommendations"}),e.length>0?(0,a.jsx)("ul",{className:"space-y-4",children:e.map((e,t)=>(0,a.jsxs)("li",{className:"p-4 bg-gray-50 rounded",children:[(0,a.jsx)("h3",{className:"font-semibold",children:e.title}),(0,a.jsx)("p",{className:"text-gray-600",children:e.description})]},t))}):(0,a.jsx)("p",{children:"No recommendations available yet."})]})}function c(){return(0,a.jsx)(l,{})}},3173:(e,t,r)=>{"use strict";r.d(t,{O:()=>c,j:()=>l});var a=r(9904),s=r(8698),n=r(399);let i={apiKey:"AIzaSyDMgImGCxXusPjGVWpeek8uMlsCdzTW8OU",authDomain:"profileai-bd7c7.firebaseapp.com",projectId:"profileai-bd7c7",storageBucket:"profileai-bd7c7.firebasestorage.app",messagingSenderId:"621048336291",appId:"1:621048336291:web:2e8ccd8569a4cfa4c8d416",databaseURL:r(9538).env.NEXT_PUBLIC_FIREBASE_DATABASE_URL},o=(0,a.Wp)(i),l=(0,n.xI)(o),c=(0,s.C3)(o)}},e=>{var t=t=>e(e.s=t);e.O(0,[507,882,129,441,517,358],()=>t(2510)),_N_E=e.O()}]);